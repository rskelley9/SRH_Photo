(function(d){d.fn.multiGallery=function(k,ob){var jd,kd,ld,md;function ge(){var a,b,c,e,l,ta=!1;O.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(d){if(!p||z||z)return!1;if(!Ub)return!0;d=d.originalEvent.touches[0];a=O.position().left;b=O.position().top;c=d.pageX;e=d.pageY;l=!1;ta=!0}).bind("touchmove.ap",function(d){if(ta){d=d.originalEvent.touches[0];if("horizontal"==Ia){var h=a-c+d.pageX,f=J,g=O.width();0<h?(h=0,Ja("off"),r=0):(Ja("on"),r=Math.abs(Math.floor(h/ (Y+H))));h<f-g?(h=f-g,Ka("off"),r=v-n):(Ka("on"),r=Math.abs(Math.floor(h/(Y+H))));O.css("left",h+"px")}else h=b-e+d.pageY,f=J,g=O.height(),0<h?(h=0,Ja("off"),r=0):(Ja("on"),r=Math.abs(Math.floor(h/(Y+H)))),h<f-g?(h=f-g,Ka("off"),r=v-n):(Ka("on"),r=Math.abs(Math.floor(h/(Y+H)))),O.css("top",h+"px");l=l||5<Math.abs(c-d.pageX)||5<Math.abs(e-d.pageY);return!1}}).bind("touchend.ap",function(a){ta=!1}).bind("click.ap-touchclick",function(a){if(l)return l=!1})}function nd(a){var b=0,c,e;for(b;b<x;b++)if(b< x-2){if(c=La[b],e=La[b+1],a>=c&&a<=e){g=b;break}}else if(b==x-1&&(c=La[b],a>=c)){g=b;break}}function he(){var a,b,c,e,l,d=!1;K.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(h){if(!p||z||Bb)return!1;if(!Vb)return!0;h=h.originalEvent.touches[0];a=K.position().left;b=K.position().top;c=h.pageX;e=h.pageY;l=!1;d=!0}).bind("touchmove.ap",function(h){if(d){h=h.originalEvent.touches[0];if("horizontal"==Ia){var f=a-c+h.pageX,g=I,k=K.width();0<f?(f=0,Ma("off")): Ma("on");f<g-k?(f=g-k,Na("off")):Na("on");nd(Math.abs(f));K.css("left",f+"px")}else f=b-e+h.pageY,g=I,k=K.height(),0<f?(f=0,Ma("off")):Ma("on"),f<g-k?(f=g-k,Na("off")):Na("on"),nd(Math.abs(f)),K.css("top",f+"px");l=l||5<Math.abs(c-h.pageX)||5<Math.abs(e-h.pageY);return!1}}).bind("touchend.ap",function(a){d=!1}).bind("click.ap-touchclick",function(a){if(l)return l=!1})}function od(a){var b=a.length,c="",e=0,l,d;for(e;e<b;e++)if(l=a.charAt(e).toLowerCase(),"\\"==l&&(l="/"),d=l.charCodeAt(0),97<=d&& 122>=d||48<=d&&57>=d||0<="_-".indexOf(l))c+=l;return c}function ie(){y||(Ya&&clearInterval(Ya),la&&clearTimeout(la),Cb(Wb))}function je(){la&&clearTimeout(la);Cb(Wb)}function yc(a){a.stopPropagation();Cb(a)}function zc(a){a.stopPropagation();Wb=a;y?(la&&clearTimeout(la),Ya&&clearInterval(Ya),"KEN_BURNS"!=w?Ya=setInterval(ie,ke):Cb(Wb)):Ac?(la&&clearTimeout(la),la=setTimeout(je,le)):"/"==a.value?(d.address.history(!1),d.address.value(pd),d.address.history()||d.address.history(!0)):qd(a.value)?(d.address.history(!1), d.address.value(pd),d.address.history()||d.address.history(!0)):Cb(a)}function Cb(a){a.stopPropagation();R();ma&&clearInterval(ma);Ac||(Ac=!0);ua=a.value;"/"==ua.charAt(0)&&(ua=ua.substring(1));"/"==ua.charAt(ua.length-1)&&(ua=ua.substring(0,ua.length-1));if(!rd(ua))return d.address.history(!1),!1;void 0!=Xb&&Xb==s||Za();t()!=pb?(L=pb,Db(t())):(qb(),va())}function rd(a){a=a.split("/");var b=a[0],c=a[1],e=!1,l=!1,d=0;1==a.length&&(pb=0,l=!0);for(d;d<x;d++)if($a[d].categoryName==b){s=d;e=!0;break}if(!e)return!1; if(!l)for(d=0,a=$a[s].mediaName,b=a.length,d;d<b;d++)if(a[d]==c){pb=d;l=!0;break}return e&&l?!0:!1}function Oa(a){return $a[s].categoryName+"/"+$a[s].mediaName[a]}function Yb(){var a;"horizontal"==Ia?(a=na?h("w"):M.width(),a+=H,n=na?Math.floor((a-sd)/(Y+H)):Math.floor(a/(Y+H)),!Bc&&n>ab?n=ab:n>v?n=v:n<Zb&&(n=Zb),J=n*Y+(n-1)*H,na&&M.css("width",J+"px"),parseInt(O.css("left"),10)):(a=na?h("h"):M.height(),a+=H,n=na?Math.floor((a-sd)/(Ba+H)):Math.floor(a/(Ba+H)),!Bc&&n>ab?n=ab:n>v?n=v:n<Zb&&(n=Zb),J= n*Ba+(n-1)*H,na&&M.css("height",J+"px"),a=-(v*Ba+(v-1)*H)+J,parseInt(O.css("top"),10)<a&&O.css("top",a+"px"));r+n>v-1&&(r=v-n);Cc();na&&("horizontal"==Ia?($b?(a=parseInt(M.css("left"),10),"left"==rb?(M.css("left",ac+"px"),F.css(rb,a-F.width()-Z+"px"),ea.css(rb,a+J+Z+"px")):(M.css("right",ac+"px"),ea.css(rb,a-F.width()-Z+"px"),F.css(rb,a+J+Z+"px"))):(a=m.width()/2,M.css("left",a-J/2+"px"),F.css("left",a-J/2-F.width()-Z+"px"),ea.css("left",a+J/2+Z+"px")),a=parseInt(M.css("top"),10),F.css("top",a+Ba/ 2-F.height()/2+"px"),ea.css("top",a+Ba/2-ea.height()/2+"px")):($b?"top"==rb?(M.css("top",ac+"px"),a=parseInt(M.css("top"),10),F.css("top",a-F.height()-Z+"px"),ea.css("top",a+J+Z+"px")):(M.css("bottom",ac+"px"),a=parseInt(M.css("bottom"),10),ea.css("bottom",a-F.height()-Z+"px"),F.css("bottom",a+J+Z+"px")):(a=m.height()/2,M.css("top",a-J/2+"px"),F.css("top",a-J/2-F.height()-Z+"px"),ea.css("top",a+J/2+Z+"px")),a=parseInt(M.css("left"),10),F.css("left",a+Y/2-F.width()/2+"px"),ea.css("left",a+Y/2-F.width()/ 2+"px")))}function Dc(){if(na&&!Ec){var a;"top"==P?(a=$?-m.height()+"px":"0px",m.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"bottom"==P?(a=$?h("h")+"px":h("h")-m.height()+"px",m.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"left"==P?(a=$?-m.width()+"px":"0px",m.stop().animate({left:a},{duration:500,easing:"easeOutQuint"})):"right"==P&&(side="left",a=$?h("w")+"px":h("w")-m.width()+"px",m.stop().animate({left:a},{duration:500,easing:"easeOutQuint"}));$?(bb.children("img").attr("src", td),$=!1):(bb.children("img").attr("src",ud),$=!0)}}function bc(){na&&("top"==P?"inside"==fa?$?m.css("top","0px"):m.css("top",-m.height()+"px"):(m.css("top","0px"),C.css("top",m.height()+"px")):"bottom"==P?"inside"==fa&&($?m.css("top",h("h")-m.height()+"px"):m.css("top",h("h")+"px")):"left"==P?"inside"==fa?$?m.css("left","0px"):m.css("left",-m.width()+"px"):(m.css("left","0px"),C.css("left",m.width()+"px")):"right"==P&&("inside"==fa?$?m.css("left",h("w")-m.width()+"px"):m.css("left",h("w")+"px"): m.css("left",h("w")+"px")))}function vd(a){if(p&&!z){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if("prevThumbBtn"==a){if(0==r)return;z=!0;r-=n}else if("nextThumbBtn"==a){if(r==v-n)return;z=!0;r+=n}wd();return!1}}function wd(){0>r?r=0:r>v-n&&(r=v-n);var a;"horizontal"==Ia?(a=r*Y+r*H,O.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){Cc()}})):(a=r*Ba+r*H,O.stop().animate({top:-a+ "px"},{duration:500,easing:"easeOutQuint",complete:function(){Cc()}}))}function Ja(a){F&&("off"==a?F.css("display","none"):F.css("display","block"))}function Ka(a){ea&&("off"==a?ea.css("display","none"):ea.css("display","block"))}function Cc(){v<=n?(Ja("off"),Ka("off"),Ub=!1):(Ja("on"),Ka("on"),Ub=!0,0==r?Ja("off"):Ja("on"),r+n==v?Ka("off"):Ka("on"),z=!1)}function me(a){if(!p||z||"KEN_BURNS"!=w&&y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(); a=d(a.currentTarget).attr("data-id");if(a!=s)return z=!0,Fc(),s=a,S?(d.address.value(Oa(0)),d.address.history()||d.address.history(!0)):Za(),!1}function ne(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget),a.attr("data-id"),a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),!1}function oe(a){if(p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget), a.attr("data-id")!=s))return a.stop().animate({opacity:Gc},{duration:500,easing:"easeOutSine"}),!1}function Fc(){Hc&&Hc.stop().animate({opacity:Gc},{duration:500,easing:"easeOutSine"}).css("cursor","pointer")}function xd(){var a=Ic[s];a&&(a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}).css("cursor","default"),Hc=a)}function Q(a,b){var c=0;for(a;a<b;a++)c+=cc[a]+cb;return c-=cb}function pe(){var a;a="horizontal"==Ca?h("w")-dc:h("h")-dc;var b=0,c=g;T=g;var e=!0;a:for(;b<a;){T--;if(!Eb&& c-T>Da){T=c-Da;e=!1;b=Q(T,c);break a}if(0>T){T=0;for(var e=!1,b=Q(T,c),l=!0;b<a;){c++;if(!Eb&&c>Da){c=Da;l=!1;b=Q(0,c);break a}if(c>x){c=x;l=!1;b=Q(0,c);break a}b=Q(0,c)}l&&(c--,b=Q(T,c));break a}b=Q(T,c)}e&&(T++,b=Q(T,c));a=La[T];"horizontal"==Ca?(I=b,A.css("width",I+"px"),Pa?A.css(W,ga+"px"):A.css("left",m.width()/2-I/2+"px"),K.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(I=b,A.css("height",I+"px"),Pa?A.css(W,ga+"px"):A.css("top",m.height()/2-I/ 2+"px"),K.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}));wa=c-T;yd()}function Fb(){var a;a="horizontal"==Ca?h("w")-dc:h("h")-dc;var b=0,c=g,e=!0;a:for(;b<a;){c++;if(!Eb&&c-g>Da){c=g+Da;e=!1;b=Q(g,c);break a}if(c>x){for(var c=x,e=!1,b=Q(g,c),l=!0;b<a;){g--;if(!Eb&&c-g>Da){g=c-Da;l=!1;b=Q(g,x);break a}if(0>g){g=0;l=!1;b=Q(0,x);break a}b=Q(g,x)}l&&(g++,b=Q(g,c));break a}b=Q(g,c)}e&&(c--,b=Q(g,c));a=La[g];wa=c-g;"horizontal"==Ca?(I=b,A.css("width",I+"px"), Pa?A.css(W,ga+"px"):A.css("left",m.width()/2-I/2+"px"),K.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(I=b,A.css("height",I+"px"),Pa?A.css(W,ga+"px"):A.css("top",m.height()/2-I/2+"px"),K.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}));yd()}function yd(){if("horizontal"==Ca){var a=parseInt(A.css("top"),10);D.css("top",a+db/2-D.height()/2+"px");oa.css("top",a+db/2-D.height()/2+"px");Pa?"left"==W?(D.css(W, ga-D.width()-aa+"px"),oa.css(W,ga+parseInt(A.css("width"),10)+aa+"px")):(oa.css(W,ga-D.width()-aa+"px"),D.css(W,ga+parseInt(A.css("width"),10)+aa+"px")):(a=m.width()/2,D.css("left",a-I/2-D.width()-aa+"px"),oa.css("left",a+I/2+aa+"px"))}else a=parseInt(A.css("left"),10),D.css("left",a+Gb/2-D.width()/2+"px"),oa.css("left",a+Gb/2-D.width()/2+"px"),Pa?"top"==W?(D.css(W,ga-D.height()-aa+"px"),oa.css(W,ga+parseInt(A.css("height"),10)+aa+"px")):(oa.css(W,ga-D.height()-aa+"px"),D.css(W,ga+parseInt(A.css("height"), 10)+aa+"px")):(a=m.height()/2,D.css("top",a-I/2-D.height()-aa+"px"),oa.css("top",a+I/2+aa+"px"))}function zd(a){if(p&&!Bb){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if("prevMenuBtn"==a){if(0==g)return;Bb=!0;pe();g=T;0>g&&(g=0)}else if("nextMenuBtn"==a){if(g==x-wa)return;Bb=!0;g+=wa;g>x-1&&(g=x-1);Fb()}return!1}}function qe(){0>g?g=0:g>x-wa&&(g=x-wa);var a=La[g];a&&("horizontal"==Ca?K.stop().animate({left:-a+"px"}, {duration:500,easing:"easeOutQuint",complete:function(){sb()}}):K.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}))}function Ma(a){"off"==a?D.css("display","none"):D.css("display","block")}function Na(a){"off"==a?oa.css("display","none"):oa.css("display","block")}function sb(){x<=wa?(Ma("off"),Na("off"),Vb=!1):(Ma("on"),Na("on"),Vb=!0,0==g?Ma("off"):Ma("on"),g+wa==x?Na("off"):Na("on"),Bb=!1)}function Za(){Ya&&clearInterval(Ya);la&&clearTimeout(la);R();ma&& clearInterval(ma);eb();ba=!1;ca&&(ca.remove(),ca=null);Vb=Ub=!1;fb&&(fb.css("opacity",ec).find("a").css("cursor","pointer"),fb=null);Fc();var a=0,b;for(a;a<v;a++)if(b=d(fc[a]))b.unbind("click",Ad),pa||b.unbind("mouseover",Bd).unbind("mouseout",Cd);fc=[];"horizontal"==Ia?O.css("left","0px"):O.css("top","0px");da&&da.css("display","none");Ea.stop().empty();Qa.stop().empty();Ea.css({zIndex:0,opacity:1,background:"none",overflow:"visible",display:"none"});Qa.css({zIndex:1,opacity:1,background:"none", overflow:"visible",display:"none"});C.css("background","none");z=!1;Xb=s;r=0;Fa=ha=ia=!1;U=[];fb=null;da=d(gc[s]).css("display","block");U=da.find("ul").children("li");Y=U.outerWidth();Ba=U.outerHeight();a=parseInt(da.attr("data-playlistSize"),10);"left"==P||"right"==P?(m.css("width",a+"px"),"outside"==fa&&C.css("width",h("w")+"px")):(m.css("height",a+"px"),"outside"==fa&&C.css("height",h("h")+"px"));v=U.length;ab>v&&(ab=v);if(Dd){a=v;b=[];var c=[],e=0,l=0;for(e;e<a;e++)b[e]=e;l=0;for(l;l<a;l++)e= Math.round(Math.random()*(b.length-1)),c[l]=b[e],b.splice(e,1);Ed=c}"horizontal"==Ia?(na&&M.css("height",Ba+"px"),H=parseInt(d(U[0]).css("marginRight"),10),d(U[v-1]).css("marginRight","0px")):(na&&M.css("width",Y+"px"),H=parseInt(d(U[0]).css("marginBottom"),10));w=da.attr("data-transitionType").toUpperCase();"SLIDE"!=w&&"SPLIT"!=w&&"REVEAL"!=w&&"KEN_BURNS"!=w&&"ALPHA"!=w&&"ZOOM"!=w&&(alert("Invalid transitionType on category number: "+s),"ALPHA"==w);"KEN_BURNS"!=w&&(a=da.attr("data-imageFitMode"), "fit-inside"!=a&&"fit-outside"!=a?(alert("Invalid imageFitMode on category number: "+s),"fit-outside"==a):"fit-inside"==a?ja=!0:ja=!1,q=da.attr("data-transitionEase"),u=parseInt(da.attr("data-transitionTime"),10));"horizontal"==Ia&&O.css("width",v*Y+(v-1)*H+"px");void 0!=da.attr("data-bgColor")&&(N=da.attr("data-bgColor"));a=0;for(a;a<v;a++)b=d(U[a]).attr("data-id",a).css("opacity",ec).bind("click",Ad),pa||b.bind("mouseover",Bd).bind("mouseout",Cd),fc.push(b);s>=g&&s<=g+wa-1||(g=s,qe());xd();Ga&& gb&&(gb=!1,ka.playAudio());if(Fd)bc(),Yb();else{bc();Yb();if(!Hb){D=f.find(".prevMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevMenuBtn").bind(X,zd);oa=f.find(".nextMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","nextMenuBtn").bind(X,zd);a=d("<div/>").addClass("menu_item").appendTo(K);cb="horizontal"==Ca?parseInt(a.css("marginRight"),10):parseInt(a.css("marginBottom"),10);c=a=0;l=d("<div/>").addClass("fontMeasure").appendTo(f);for(a;a<x;a++)b=d("<div/>").html(Gd[a]).addClass("menu_item").appendTo(l), "horizontal"==Ca?(b.css({left:c+a*cb+"px",top:"0px"}),c+=b.width(),cc.push(b.outerWidth()),La.push(parseInt(b.css("left"),10))):(b.css({top:c+a*cb+"px",left:0}),c+=b.height(),cc.push(b.outerHeight()),La.push(parseInt(b.css("top"),10))),b.css("width",b.width()+1+"px"),db<b.height()&&(db=b.height()),Gb<b.width()&&(Gb=b.width()),b.appendTo(K).attr("data-id",a).bind("click",me).css({cursor:"pointer",opacity:Gc}),pa||b.bind("mouseover",ne).bind("mouseout",oe),Ic.push(b);ms=a=0;for(a;a<x;a++)ms+=cc[a]+ cb;ms-=cb;re(Ic);"horizontal"==Ca?(A.css("height",db+"px"),K.css({width:ms+"px",height:db+"px"}),parseInt(A.css("height"),10)):(A.css("width",Gb+"px"),K.css({height:ms+"px",width:db+"px"}),parseInt(A.css("width"),10));l.remove();Fb();xd()}Ec||m.css("display","block");Fd=!0}Hb||Fb();S||(L=0,Db(t()))}function Ad(a){if(!p||ha||"KEN_BURNS"!=w&&y)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if(a==t())return!1; Ib=!0;eb();S?(hb(),L=a,d.address.value(Oa(t())),d.address.history()||d.address.history(!0)):Db(a);return!1}function Bd(a){if(!p)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);a.attr("data-id");a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"});return!1}function Cd(a){if(!p)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);if(a.attr("data-id")== t())return!1;a.stop().animate({opacity:ec},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","pointer");return!1}function hb(){fb&&fb.stop().animate({opacity:ec},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","pointer")}function qb(){var a=fc[t()];a&&(a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","default"),fb=a);a=t();a>=r&&a<=r+n-1||(r=a,wd())}function Hd(a){if(!z){hc=!0;var b;b=d(U[a]);var c,e,l=Ra[s].main;a=d(new Image).attr("id", a).css({top:0,left:0,display:"block"});"SLIDE"==w||"SPLIT"==w||"REVEAL"==w?a.css("position","absolute"):"KEN_BURNS"!=w&&"ALPHA"!=w&&"ZOOM"!=w||a.css({position:"relative",width:"100%",height:"100%"});b=b.attr("data-imagePath");a.load(function(){c=d(this);e=parseInt(c.attr("id"),10);this.origWidth=this.width;this.origHeight=this.height;l[e]=c;hc=!1;ha?(ha=!1,p?va():setTimeout(function(){va()},800)):Db(t());p||(p=!0,"undefined"!==typeof multiGallerySetupDone&&multiGallerySetupDone(),"inside"==fa&&se&& setTimeout(function(){bc();Yb();Hb||Fb();Dc()},500),Ga&&ob.autoOpenAudioPlayer&&Jc())}).attr("src",b);a.error(function(a){})}}function tb(){ha=!0;hc?(ma&&clearInterval(ma),ma=setInterval(te,ue)):Hd(t())}function te(){hc||(ma&&clearInterval(ma),Kc[t()]?(ha=!1,va()):Hd(t()))}function va(a){switch(w){case "SLIDE":ve();break;case "SPLIT":we();break;case "REVEAL":xe();break;case "KEN_BURNS":a||(Lc=Mc=!1);ye();break;case "ALPHA":ze();break;case "ZOOM":Ae()}}function ve(){y=!0;var a=Ra[s].main;if(a[t()]){var a= a[t()],b=a[0].origWidth,c=a[0].origHeight,e=h("w"),l=h("h");currentHolder=qa(!0).css("display","block");if(xa||b>e||c>l)c=ya(C,b,c,ja),b=c.width,c=c.height;void 0!=N&&(Ea.css("background",N),Qa.css("background",N));ub([a]);a.css({width:b+"px",height:c+"px",left:e/2-b/2+"px",top:l/2-c/2+"px"});currentHolder.css({width:e+"px",height:l+"px",overflow:"hidden"});vb();ia?(Nc=Oc(Be),Ce(currentHolder),currentHolder.append(a),a=ib(currentHolder),De(currentHolder,a)):currentHolder.css({left:"0px",top:"0px", opacity:0}).append(a).stop().animate({opacity:1},{duration:Pc,easing:Qc,complete:function(){E()}});ia=!0}else jb(),tb()}function Ce(a){switch(Nc){case "top":a.css({left:0,top:-h("h")+"px"});break;case "left":a.css({left:-h("w")+"px",top:0});break;case "bottom":a.css({left:0,top:h("h")+"px"});break;case "right":a.css({left:h("w")+"px",top:0})}}function De(a,b){switch(Nc){case "top":a.stop().animate({top:0},{duration:u,easing:q});b.stop().animate({top:h("h")},{duration:u,easing:q,complete:function(){E(b)}}); break;case "bottom":a.stop().animate({top:0},{duration:u,easing:q});b.stop().animate({top:-h("h")},{duration:u,easing:q,complete:function(){E(b)}});break;case "left":a.stop().animate({left:0},{duration:u,easing:q});b.stop().animate({left:h("w")},{duration:u,easing:q,complete:function(){E(b)}});break;case "right":a.stop().animate({left:0},{duration:u,easing:q}),b.stop().animate({left:-h("w")},{duration:u,easing:q,complete:function(){E(b)}})}}function we(){y=!0;var a=Ra[s].main;if(a[t()]){var b=a[t()], c=h("w"),e=h("h"),l=b.clone(),d=b[0].origWidth,f=b[0].origHeight,a=qa(!0).css("display","block");if(xa||d>c||f>e)f=ya(C,d,f,ja),d=f.width,f=f.height;ub([b,l]);b.css({width:d+"px",height:f+"px",left:c/2-d/2+"px",top:e/2-f/2+"px"});l.css({width:d+"px",height:f+"px"});a.css({width:c+"px",height:e+"px",left:"0px",top:"0px",overflow:"hidden"});V=Oc(Ee);a.splitCase=V;Fe(b,l,a,d,f);vb();ia?(b=ib(a).css("display","block"),Rc(b,a),Ge(b)):a.css("opacity",0).stop().animate({opacity:1},{duration:Pc,easing:Qc, complete:function(){E()}});ia=!0}else jb(),tb()}function Fe(a,b,c,e,l){var ta=h("w"),f=h("h");if("horizontalUpLeft"==V||"horizontalUpRight"==V||"horizontalSplit"==V)d("<div/>").attr("data-title","split1").css({background:N,position:"absolute",top:0,left:0,width:ta+"px",height:f/2+"px",overflow:"hidden"}).append(a).appendTo(c),d("<div/>").attr("data-title","split2").css({background:N,position:"absolute",top:f/2+"px",left:0,width:ta+"px",height:f/2+"px",overflow:"hidden"}).append(b).appendTo(c),b.css({left:ta/ 2-e/2+"px",top:-f/2+(f-l)/2+"px"});else if("verticalUpLeft"==V||"verticalDownLeft"==V||"verticalSplit"==V)d("<div/>").attr("data-title","split1").css({background:N,position:"absolute",top:0,left:0,width:ta/2+"px",height:f+"px",overflow:"hidden"}).append(a).appendTo(c),d("<div/>").attr("data-title","split2").css({background:N,position:"absolute",top:0,left:ta/2+"px",width:ta/2+"px",height:f+"px",overflow:"hidden"}).append(b).appendTo(c),b.css({left:-e/2+"px",top:f/2-l/2+"px"})}function Ge(a){V=a.splitCase; var b=d(a.children("div[data-title=split1]")),c=d(a.children("div[data-title=split2]")),e=h("w"),l=h("h");"horizontalUpLeft"==V?(b.stop().animate({left:-e+"px"},{duration:u,easing:q}),c.stop().animate({left:e+"px"},{duration:u,easing:q,complete:function(){E(a)}})):"horizontalUpRight"==V?(b.stop().animate({left:e+"px"},{duration:u,easing:q}),c.stop().animate({left:-e+"px"},{duration:u,easing:q,complete:function(){E(a)}})):"horizontalSplit"==V?(b.stop().animate({top:-l/2+"px"},{duration:u,easing:q}), c.stop().animate({top:l+"px"},{duration:u,easing:q,complete:function(){E(a)}})):"verticalUpLeft"==V?(b.stop().animate({top:-l+"px"},{duration:u,easing:q}),c.stop().animate({top:l+"px"},{duration:u,easing:q,complete:function(){E(a)}})):"verticalDownLeft"==V?(b.stop().animate({top:l+"px"},{duration:u,easing:q}),c.stop().animate({top:-l+"px"},{duration:u,easing:q,complete:function(){E(a)}})):"verticalSplit"==V&&(b.stop().animate({left:-e/2+"px"},{duration:u,easing:q}),c.stop().animate({left:e+"px"}, {duration:u,easing:q,complete:function(){E(a)}}))}function xe(){y=!0;var a=Ra[s].main;if(a[t()]){var a=a[t()],b=a[0].origWidth,c=a[0].origHeight,e=qa(!0).css("display","block"),d=h("w"),f=h("h");if(xa||b>f||c>f)c=ya(C,b,c,ja),b=c.width,c=c.height;void 0!=N&&(Ea.css("background",N),Qa.css("background",N));ub([a]);a.css({width:b+"px",height:c+"px",left:d/2-b/2+"px",top:f/2-c/2+"px"});e.css({overflow:"hidden",width:d+"px",height:f+"px",left:"0px",top:"0px"});vb();ia?(Jb=Oc(He),b=ib(e),Rc(b,e),e.append(a), Ie(b)):e.css("opacity",0).append(a).stop().animate({opacity:1},{duration:Pc,easing:Qc,complete:function(){E()}});ia=!0}else jb(),tb()}function Ie(a){"top"==Jb?a.stop().animate({top:-h("h")+"px"},{duration:u,easing:q,complete:function(){E(a)}}):"bottom"==Jb?a.stop().animate({top:h("h")+"px"},{duration:u,easing:q,complete:function(){E(a)}}):"right"==Jb?a.stop().animate({left:h("w")+"px"},{duration:u,easing:q,complete:function(){E(a)}}):"left"==Jb&&a.stop().animate({left:-h("w")+"px"},{duration:u,easing:q, complete:function(){E(a)}})}function ze(){y=!0;var a=Ra[s].main;if(a[t()]){var a=a[t()],b=a[0].origWidth,c=a[0].origHeight,e=qa(!0).css({display:"block",opacity:0}),d=h("w"),f=h("h");if(xa||b>d||c>f)c=ya(C,b,c,ja),b=c.width,c=c.height;void 0!=N&&C.css("background",N);ub([a]);a.css({width:b+"px",height:c+"px",left:d/2-b/2+"px",top:f/2-c/2+"px"});e.css({overflow:"hidden",width:d+"px",height:f+"px",left:"0px",top:"0px"}).append(a);vb();if(ia){var g=ib(e).stop().animate({opacity:0},{duration:u,easing:q, complete:function(){E(g)}});e.stop().animate({opacity:1},{duration:u,easing:q})}else e.stop().animate({opacity:1},{duration:u,easing:q,complete:function(){E()}});ia=!0}else jb(),tb()}function Ae(){y=!0;var a=Ra[s].main;if(a[t()]){var a=a[t()],b=a[0].origWidth,c=a[0].origHeight,e=h("w"),d=h("h");if(xa||b>e||c>d)c=ya(C,b,c,ja),b=c.width,c=c.height;void 0!=N&&C.css("background",N);ub([a]);var f=qa(!0).css("display","block"),g=ib(f);Rc(f,g);f.css({width:e+"px",height:d+"px",left:0,top:0,overflow:"hidden"}).append(a); a.css({left:Math.random()*e+"px",top:Math.random()*d+"px",width:"0px",height:"0px"});vb();ia?a.animate({width:b+"px",height:c+"px",left:h("w")/2-b/2+"px",top:h("h")/2-c/2+"px"},{duration:u,easing:q,complete:function(){E(g)}}):a.animate({width:b+"px",height:c+"px",left:h("w")/2-b/2+"px",top:h("h")/2-c/2+"px"},{duration:u,easing:q,complete:function(){E()}});ia=!0}else jb(),tb()}function E(a){z||(a&&a.empty().css("display","none"),y=!1,Id(),Ib=!1,G&&!ba&&(B.children("img")&&B.children("img").attr("src", kb),ic(),Kb()))}function ye(){Fa=y=!0;var a=Ra[s].main;if(a[t()]){var b=a[t()],c=h("w"),e=h("h"),l=b[0].origWidth,f=b[0].origHeight,a=d(U[t()]),g=!1,k=parseFloat(a.attr("data-startScale"));if(isNaN(k)||0==k)k=1;var m=parseFloat(a.attr("data-endScale"));if(isNaN(m)||0==m)m=1.5;k<m&&(g=!0);var p=a.attr("data-startPosition").toLowerCase();if(Jd(p)||!Kd(p,Lb))p=Sc(Lb);var r=a.attr("data-endPosition").toLowerCase();if(Jd(r)||!Kd(r,Lb))for(r=Sc(Lb);r==p;)r=Sc(Lb);wb?(a=ib(wb),wb.css("zIndex",0),a.css("zIndex", 1)):a=qa(!0);a.css({opacity:Mc?1:0,display:"block"}).append(b);void 0!=N&&C.css("background",N);ub([b]);g?(k*=c,k<c&&(k=c),g=k*(f/l),g<e&&(g=e,k=g*(l/f)),b=c*m,b<c&&(b=c),m=b*(f/l),m<e&&(m=e,b=m*(l/f))):(b=c*m,b<c&&(b=c),m=b*(f/l),m<e&&(m=e,b=m*(l/f)),k*=c,k<=b&&(k=1.5*b),g=k*(f/l),g<e&&(g=e,k=g*(l/f)));a.css({width:k+"px",height:g+"px"});var n,q,l=a.width(),f=a.height();switch(p){case "tl":q=n=0;break;case "tc":n=c/2-l/2;q=0;break;case "tr":n=c-l;q=0;break;case "ml":n=0;q=e/2-f/2;break;case "mc":n= c/2-l/2;q=e/2-f/2;break;case "mr":n=c-l;q=e/2-f/2;break;case "bl":n=0;q=e-f;break;case "bc":n=c/2-l/2;q=e-f;break;case "br":n=c-l,q=e-f}c=b;e=m;p=Je(r,c,e);r=p.x;p=p.y;a.css({left:n+"px",top:q+"px"});jd=r;kd=p;ld=c;md=e;vb();G&&B.children("img")&&B.children("img").attr("src",kb);ic();a.stop().animate({opacity:1},{duration:Tc,easing:"easeOutSine",queue:!1,complete:function(){ib(d(this)).stop().empty().css("display","none");Lc||Id();Lc=!0;Ib=Fa=!1;!G&&y?jc():Uc&&jc()}});wb=a;G?(Kb(),a.animate({left:r+ "px",top:p+"px",width:c+"px",height:e+"px"},{duration:ra+Tc,easing:"linear",queue:!1,complete:function(){G&&d(this).empty().css("display","none")}})):y=!1;Mc=!0}else jb(),tb()}function jc(){if(!p||z||Fa)return!1;wb.stop();R();y=!1}function Ld(){if(!p||z||Fa)return!1;Kb();wb.animate({left:jd+"px",top:kd+"px",width:ld+"px",height:md+"px"},{duration:ra+Tc,easing:"linear",queue:!1,complete:function(){G&&d(this).empty().css("display","none")}});y=!0}function Je(a,b,c){var e={},d=h("w"),f=h("h");switch(a){case "tl":e.x= 0;e.y=0;break;case "tc":e.x=d/2-b/2;e.y=0;break;case "tr":e.x=d-b;e.y=0;break;case "ml":e.x=0;e.y=f/2-c/2;break;case "mc":e.x=d/2-b/2;e.y=f/2-c/2;break;case "mr":e.x=d-b;e.y=f/2-c/2;break;case "bl":e.x=0;e.y=f-c;break;case "bc":e.x=d/2-b/2;e.y=f-c;break;case "br":e.x=d-b,e.y=f-c}return e}function ib(a){return"_holder1"==a.attr("data-title")?Qa:Ea}function Rc(a,b){a.css("zIndex",1);b.css("zIndex",0)}function qa(a){var b=Ea.children().size();return a?0<b?Qa:Ea:0<b?Ea:Qa}function ya(a,b,c,e){a={};var d= h("w"),f=h("h"),g=(d-0)/(f-0),k=b/c;k<g?e?(a.width=(f-0)/c*b,a.height=f-0):(a.height=(d-0)/b*c,a.width=d-0):k>g?e?(a.height=(d-0)/b*c,a.width=d-0):(a.width=(f-0)/c*b,a.height=f-0):(a.width=d-0,a.height=f-0);return a}function Jd(a){var b=!1;""==a.replace(/\s/g,"")&&(b=!0);return b}function Oc(a){var b=Math.floor(Math.random()*(a.length-1)),b=a.splice(b,1)[0];a.push(b);return b}function Sc(a){var b=Math.round(Math.random()*(a.length-1));return a[b]}function Kd(a,b){var c=0,e=b.length,d,f;for(c;c<e;c++)if(f= b[c],a==f){d=!0;break}return d}function Md(a){ba&&(G||(G=!0),ba=!1);G?(R(),G=!1,pa?B.children("img")&&B.children("img").attr("src",kc):B.children("img")&&B.children("img").attr("src",a?Nd:kc),"KEN_BURNS"==w&&y&&jc()):(G=!0,pa?B.children("img")&&B.children("img").attr("src",kb):B.children("img")&&B.children("img").attr("src",a?Od:kb),ra||ic(),"KEN_BURNS"!=w?y||Kb():y||Ld())}function Mb(a){a?(G=!0,B.children("img")&&B.children("img").attr("src",kb),ra||ic(),"KEN_BURNS"!=w?y||Kb():y||Ld()):(R(),G=!1, B.children("img")&&B.children("img").attr("src",kc),"KEN_BURNS"==w&&y&&jc())}function R(){Nb&&clearTimeout(Nb);Sa.length&&Sa.stop();ra&&(Pd=(new Date).getTime()-Qd,ra-=Pd)}function Kb(){Nb&&clearTimeout(Nb);Qd=(new Date).getTime();Nb=setTimeout(Vc,ra);if(Sa.length){var a=h("w");Sa.stop().animate({width:a+"px"},{duration:ra,easing:"linear"})}}function ic(){var a;Ke?a=void 0!=da.attr("data-duration")?parseFloat(da.attr("data-duration"),10):0<lc?lc:3E3:(a=d(U[t()]),a=void 0!=a.attr("data-duration")? parseFloat(a.attr("data-duration"),10):0<lc?lc:3E3);ra=a}function t(){return Dd?Ib?L:Ed[L]:L}function re(a){d(a).each(function(){d(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}function jb(){Ob.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}function vb(){Ob.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Ob.css("display", "none")}})}function qd(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function Ta(a){p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget).attr("class"),"music_toggle"==a?Pb.children("img").attr("src",Le):"controls_prev"==a?Wc.children("img").attr("src",Me):"controls_toggle"==a?G?B.children("img").attr("src",Od):B.children("img").attr("src",Nd):"controls_next"==a?Xc.children("img").attr("src",Ne):"info_toggle"==a?lb.children("img").attr("src", Oe):"link_toggle"==a?xb.children("img").attr("src",Pe):"playlist_toggle"==a?$?bb.children("img").attr("src",Qe):bb.children("img").attr("src",Re):"gallery_fullscreen"==a&&("normal"==mc?Ha.children("img").attr("src",Se):Ha.children("img").attr("src",Te)))}function Ua(a){p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget).attr("class"),"music_toggle"==a?Pb.children("img").attr("src",Ue):"controls_prev"==a?Wc.children("img").attr("src", Ve):"controls_toggle"==a?G?B.children("img").attr("src",kb):B.children("img").attr("src",kc):"controls_next"==a?Xc.children("img").attr("src",We):"info_toggle"==a?lb.children("img").attr("src",Rd):"link_toggle"==a?xb.children("img").attr("src",Xe):"playlist_toggle"==a?$?bb.children("img").attr("src",ud):bb.children("img").attr("src",td):"gallery_fullscreen"==a&&("normal"==mc?Ha.children("img").attr("src",Sd):Ha.children("img").attr("src",Td)))}function Va(a){if(!p)return!1;a||(a=window.event);a.cancelBubble? a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("class");if("music_toggle"==a)Jc();else if("controls_prev"==a){if(ha)return;Yc()}else if("controls_toggle"==a)Md(!0);else if("controls_next"==a){if(ha)return;Zc()}else if("info_toggle"==a){if(!Qb)return;$c()}else if("link_toggle"==a){if(!Qb)return;nc&&("_parent"==yb?window.location.href=nc:"_blank"==yb&&window.open(nc,yb))}else"playlist_toggle"==a?Dc():"gallery_fullscreen"==a&&(ad||bd)&&(document.fullScreenElement&& null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&& document.webkitCancelFullScreen());return!1}function Ud(a){if(!ha)return"right"==a?Yc():"left"==a&&Zc(),!1}function Zc(){"KEN_BURNS"!=w?y||Vc():Fa||Vc()}function Yc(){"KEN_BURNS"!=w?y||Vd():Fa||Vd()}function Db(a){"KEN_BURNS"!=w?ia?y||(R(),eb(),hb(),L=a,qb(),va()):(R(),eb(),hb(),L=a,qb(),va()):Fa||(R(),eb(),hb(),L=a,qb(),va())}function Vc(){R();eb();hb();L++;if(L>v-1&&(L=0,Wd)){s++;s>x-1&&(s=0);g+wa-1<s?g=s:0==s&&(g=s);S?(d.address.value(Oa(t())),d.address.history()||d.address.history(!0)):Za();return}S? (d.address.value(Oa(t())),d.address.history()||d.address.history(!0)):(qb(),va())}function Vd(){R();eb();hb();L--;if(0>L&&(L=v-1,Wd)){s--;0>s&&(s=x-1);L=$a[s].mediaName.length-1;S?(d.address.value(Oa(t())),d.address.history()||d.address.history(!0)):Za();return}S?(d.address.value(Oa(t())),d.address.history()||d.address.history(!0)):(qb(),va())}function Id(){var a=d(U[t()]);ca&&(ca.remove(),ca=null);var b=d(U[t()]);if(void 0!=b.attr("data-caption-id")){b=b.attr("data-caption-id");ca=Ye.find(b).clone().css({display:"none"}).appendTo(C); var c,e,f=0,h=0,g;mb=[];e=ca.children().size();for(f;f<e;f++)b={},mb.push(b),c=d(ca.children()[f]),b.content_item=c,b.startX=parseInt(c.attr("data-startX"),10),b.startY=parseInt(c.attr("data-startY"),10),b.endX=parseInt(c.attr("data-endX"),10),b.endY=parseInt(c.attr("data-endY"),10),b.ease=c.attr("data-ease"),b.time=parseInt(c.attr("data-time"),10),b.delay=parseInt(c.attr("data-delay"),10),g=b.time+b.delay,g>h&&(h=g),c.css({position:"absolute",opacity:0,left:b.startX+"px",top:b.startY+"px",zIndex:9}); ca.css("display","block");f=0;for(f;f<e;f++)b=mb[f],c=b.content_item,c.delay(b.delay).animate({left:b.endX+"px",top:b.endY+"px",opacity:1},{duration:b.time,easing:b.ease})}oc&&void 0!=a.attr("data-description")&&!qd(a.attr("data-description"))&&(Xd=a.attr("data-description"),za.css("width","auto").html(Xd),parseInt(za.css("width"),10)>Yd&&za.css("width",Yd+"px"),oc&&(lb.children("img").attr("src",Rd),lb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"})), Ze&&$c());nb&&(void 0!=a.attr("data-vimeo")?(pc="vimeo",qc=a.attr("data-vimeo"),rc("on")):void 0!=a.attr("data-youtube")?(pc="youtube",qc=a.attr("data-youtube"),rc("on")):void 0!=a.attr("data-localMp4")&&(pc="local",b=a.attr("data-localMp4"),c="",void 0!=a.attr("data-localOgv")&&(c=a.attr("data-localOgv")),e="",void 0!=a.attr("data-localWebm")&&(e=a.attr("data-localWebm")),f="",void 0!=a.attr("data-localPreview")&&(f=a.attr("data-localPreview")),qc={mp4:b,ogv:c,webm:e,preview:f},rc("on")));cd&&xb.css({opacity:0, display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"});Qb=!0;"undefined"!==typeof afterSlideChange&&afterSlideChange(t())}function ub(a){cd=!1;a=d(U[t()]);void 0!=a.attr("data-link")&&(cd=!0,nc=a.attr("data-link"),void 0!=a.attr("data-target")&&(yb=a.attr("data-target")),yb||(yb="_blank"))}function $e(){if(mb.length){var a=0,b,c,d=mb.length;for(a;a<d;a++)b=mb[a],c=b.content_item,c.stop().animate({left:b.startX+"px",top:b.startY+"px",opacity:0},{duration:500,easing:"easeOutQuint"}); setTimeout(function(){ca&&(ca.remove(),ca=null);mb=[]},500)}}function eb(){Qb=!1;"undefined"!==typeof beforeSlideChange&&beforeSlideChange(t());$e();ra=null;Sa.length&&Sa.stop().css("width","0px");Ga&&gb&&(gb=!1,ka.playAudio());ba&&(ba=!1,G=!0);nb&&(Uc=!1,sc&&Rb("off",!0),rc("off"));oc&&(lb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){lb.css("display","none")}}),zb&&(za.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){za.css("display", "none")}}),zb=!1));xb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){xb.css("display","none")}})}function $c(){tc&&Jc();zb?(za.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){za.css("display","none")}}),zb=!1):(za.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}),zb=!0)}function Jc(){Ga&&(zb&&$c(),tc?(ka.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){ka.css("display", "none")}}),tc=!1):(ka.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}),tc=!0,Zd||(ka.reinitNameScroll(),Zd=!0)))}function h(a){var b;if("top"==P||"bottom"==P)b="inside"!=fa?"w"==a?f.width():f.height()-m.height():"w"==a?f.width():f.height();else if("left"==P||"right"==P)b="inside"!=fa?"w"==a?f.width()-m.width():f.height():"w"==a?f.width():f.height();return b}function af(){"outside"==fa&&("left"==P||"right"==P?C.css("width",h("w")+"px"):C.css("height", h("h")+"px"));if(y)$d();else switch(w){case "SLIDE":var a=qa(!1),b=a.children(),c=b[0].origWidth,e=b[0].origHeight,f=h("w"),g=h("h");if(xa||c>f||e>g)e=ya(C,c,e,ja),c=e.width,e=e.height;b.css({width:c+"px",height:e+"px",left:f/2-c/2+"px",top:g/2-e/2+"px"});a.css({width:f+"px",height:g+"px"});break;case "SPLIT":var a=qa(!1),b=a.splitCase,c=d(a.children("div[data-title=split1]")),f=d(a.children("div[data-title=split2]")),g=c.children("img"),e=f.children("img"),k=g[0].origWidth,m=g[0].origHeight,p=h("w"), n=h("h");if(xa||k>p||m>n)m=ya(C,k,m,ja),k=m.width,m=m.height;g.css({width:k+"px",height:m+"px",left:p/2-k/2+"px",top:n/2-m/2+"px"});e.css({width:k+"px",height:m+"px"});a.css({width:p+"px",height:n+"px",left:"0px",top:"0px"});if("horizontalUpLeft"==b||"horizontalUpRight"==b||"horizontalSplit"==b)c.css({top:0,left:0,width:p+"px",height:n/2+"px"}),f.css({top:n/2+"px",left:0,width:p+"px",height:n/2+"px"}),e.css({left:p/2-k/2+"px",top:-n/2+(n-m)/2+"px"});else if("verticalUpLeft"==b||"verticalDownLeft"== b||"verticalSplit"==b)c.css({top:0,left:0,width:p/2+"px",height:n+"px"}),f.css({top:0,left:p/2+"px",width:p/2+"px",height:n+"px"}),e.css({left:-k/2+"px",top:n/2-m/2+"px"});break;case "REVEAL":a=qa(!1);b=a.children();c=b[0].origWidth;e=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||e>g)e=ya(C,c,e,ja),c=e.width,e=e.height;b.css({width:c+"px",height:e+"px",left:f/2-c/2+"px",top:g/2-e/2+"px"});a.css({width:f+"px",height:g+"px",left:"0px",top:"0px"});break;case "ALPHA":a=qa(!1);b=a.children();c=b[0].origWidth; e=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||e>g)e=ya(C,c,e,ja),c=e.width,e=e.height;b.css({width:c+"px",height:e+"px",left:f/2-c/2+"px",top:g/2-e/2+"px"});a.css({width:f+"px",height:g+"px",left:"0px",top:"0px"});break;case "ZOOM":a=qa(!1);b=a.children();c=b[0].origWidth;e=b[0].origHeight;f=h("w");g=h("h");if(xa||c>f||e>g)e=ya(C,c,e,ja),c=e.width,e=e.height;a.css({width:f+"px",height:g+"px",left:0,top:0});b.css({width:c+"px",height:e+"px",left:f/2-c/2+"px",top:g/2-e/2+"px"});break;case "KEN_BURNS":$d()}bc(); Yb();Hb||Fb()}function $d(){R();ma&&clearInterval(ma);Ea.stop().empty().css({zIndex:0,opacity:1,background:"none",overflow:"visible",display:"none"});Qa.stop().empty().css({zIndex:1,opacity:1,background:"none",overflow:"visible",display:"none"});va(!0)}var p=!1,dd=this;d("body");var bf=d(window),ae=d(document),X="",ed,Ub=!0,Vb=!0;"ontouchstart"in window?(ed=!0,X="touchstart.ap"):(ed=!1,X="mousedown.ap");var uc=!1,be=function(){var a=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&& (a=parseFloat(RegExp.$1));return a}();-1!=be&&9>be&&(uc=!0);var pa=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);Math.abs(window.orientation);window.onorientationchange=function(){};var bd=!!document.createElement("video").canPlayType,kb="media/data/gallery_icons/pause.png",Od="media/data/gallery_icons/pause_on.png",td="media/data/gallery_icons/plus.png",Re="media/data/gallery_icons/plus_on.png",ud="media/data/gallery_icons/minus.png",Qe="media/data/gallery_icons/minus_on.png", Ve="media/data/gallery_icons/prev.png",Me="media/data/gallery_icons/prev_on.png",kc="media/data/gallery_icons/play.png",Nd="media/data/gallery_icons/play_on.png",We="media/data/gallery_icons/next.png",Ne="media/data/gallery_icons/next_on.png",Rd="media/data/gallery_icons/info.png",Oe="media/data/gallery_icons/info_on.png",Xe="media/data/gallery_icons/link.png",Pe="media/data/gallery_icons/link_on.png",Ue="media/data/audio_icons/music.png",Le="media/data/audio_icons/music_on.png",Sd="media/data/gallery_icons/fullscreen_enter.png", Se="media/data/gallery_icons/fullscreen_enter_on.png",Td="media/data/gallery_icons/fullscreen_exit.png",Te="media/data/gallery_icons/fullscreen_exit_on.png",fa=k.playlistIndex,Pa=k.fixMenu;if(Pa)var W=k.fixMenuSettings.side,ga=k.fixMenuSettings.value;var $b=k.fixThumbs;if($b)var rb=k.fixThumbsSettings.side,ac=k.fixThumbsSettings.value;var cf=k.disableRightClick,df=k.componentFixedSize,P=k.playlistPosition,Ia=k.thumbOrientation,Ca=k.menuOrientation,Yd=k.maxDescriptionWidth,se=k.autoOpenPlaylist,G= k.slideshowOn,lc=k.slideshowDelay,ra,Ke=k.useGlobalDelay,Gc=k.menuItemOffOpacity,ec=k.thumbOffOpacity,Ec=k.playlistHidden,Dd=k.randomPlay,Wd=k.slideshowAdvancesToNextCategory,xa=k.forceImageFitMode,ab=k.visibleThumbs,Z=k.thumbBtnSpace,Da=k.visibleMenuItems,aa=k.menuBtnSpace,Ze=k.autoOpenDescription,nb=k.useVideo,Ga=k.useAudio,ef=k.pauseSlideshowOnHover,na=k.autoAdjustPlaylist,f=d(k.componentHolder),Ob=f.find(".componentPreloader");jb();var Sa=f.find(".slide_timer"),O=f.find(".thumbWrapper"),C=f.find(".componentHolder"), m=f.find(".componentPlaylist"),M=f.find(".thumbHolder"),A=f.find(".menuHolder"),K=f.find(".menuWrapper"),Ea=f.find(".mediaHolder1").attr("data-title","_holder1").css("zIndex",0).bind("dragstart",function(a){a.preventDefault();return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(Ud,!0),Qa=f.find(".mediaHolder2").attr("data-title","_holder2").css("zIndex",1).bind("dragstart",function(a){a.preventDefault();return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(Ud, !0),F=f.find(".prevThumbBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevThumbBtn").bind(X,vd),ea=f.find(".nextThumbBtn").css({display:"none",cursor:"pointer"}).attr("data-id","nextThumbBtn").bind(X,vd),Ye=f.find(".caption_holder");if(nb)var Wa=d(k.playerHolder),pc,qc,Aa=!1,Sb,sc=!1,ba=!1,ff=k.playerBgOpacity,vc=f.find(".player_bg").css("display","none").bind(X,function(){if(!p||z||Aa)return!1;Aa=!0;Rb("off");return!1}),wc=f.find(".player_bigPlay").css({display:"none",cursor:"pointer"}).bind("click", function(){if(!p||z||Aa||!Qb)return!1;Aa=!0;G&&(Uc=ba=!0,Mb(!1));Rb("on");return!1}),rc=function(a){"on"==a?wc.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"}):wc.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){wc.css("display","none")}})},Rb=function(a,b){var c=500;"undefined"!==typeof b&&(c=0);"on"==a?(vc.stop().css({opacity:0,display:"block"}).animate({opacity:ff},{duration:c,easing:"easeOutSine"}),bd?Wa.stop().css({opacity:0, display:"block"}).animate({opacity:1},{duration:c,easing:"easeOutSine",complete:function(){Aa=!1}}):Wa.stop().css({opacity:0,display:"block",left:"50%"}).animate({opacity:1},{duration:c,easing:"easeOutSine",complete:function(){Aa=!1}}),Sb&&Sb._findMedia(pc,qc),sc=!0,Ga&&ka.getMediaPlaying()&&(ka.pauseAudio(),gb=!0)):(Sb&&Sb._cleanMedia(),vc.stop().animate({opacity:0},{duration:c,easing:"easeOutSine",complete:function(){vc.css("display","none")}}),Wa.stop().animate({opacity:0},{duration:c,easing:"easeOutSine", complete:function(){bd?Wa.css("display","none"):Wa.css("left","-10000px");sc=Aa=!1;ba&&(ba=!1,Mb(!0));Ga&&gb&&(gb=!1,ka.playAudio())}}))};else d(k.playerHolder).remove(),f.find(".player_bg").remove();if(Ga){var Pb=f.find(".music_toggle").css("cursor","pointer").bind(X,Va);pa||Pb.bind("mouseover",Ta).bind("mouseout",Ua);var tc=!1,Zd=!1,gb=!1,ka=d(ob.playerHolder).html5audio(ob);Pb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"})}else ob&&(d(ob.playerHolder).remove(), d(ob.playlistHolder).remove()),f.find(".music_toggle").remove();var ad=!1;if(function(){var a=!1;document.documentElement.requestFullScreen?a=!0:document.documentElement.mozRequestFullScreen?a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0);return a}()&&f.find(".gallery_fullscreen").length){var ad=!0,mc="normal",Ha=f.find(".gallery_fullscreen").css("cursor","pointer").bind("click",Va);pa||Ha.bind("mouseover",Ta).bind("mouseout",Ua)}else f.find(".gallery_fullscreen").remove();if(ad)ae.on("fullscreenchange mozfullscreenchange webkitfullscreenchange", function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?(mc="normal",Ha.find("img").attr("src",Sd)):(mc="fullscreen",Ha.find("img").attr("src",Td))});var Bc=!1;"max"==ab&&(Bc=!0,$b=!1);var Ib=!1,gc=O.children("div[class=playlist]"),x=gc.size(),Hb=!1;1==x&&(Hb=!0);var mb=[],ca,U=[],da,v,$=!1,wb,Qd,Pd,Tc=500,Mc=!1,Lc=!1,Uc=!1,Lb="tl tc tr ml mc mr bl bc br".split(" "),Fa=!1,Be=["top","left","bottom","right"],Nc,He=["top","left", "bottom","right"],Jb,Ee="horizontalUpLeft horizontalUpRight horizontalSplit verticalUpLeft verticalDownLeft verticalSplit".split(" "),V,Pc=500,Qc="easeOutSine",L=-1,z=!1,Nb,fd,ue=100,ma,hc=!1,ha=!1,q,u,y=!1,fb=null,fc=[],cd=!1,nc,yb,Ra={},Xa,Kc,Gd=[],sa=0;for(sa;sa<x;sa++)Xa={},Kc=[],Xa.mainLoaded=!1,Xa.main=Kc,Ra[sa]=Xa,Gd[sa]=d(gc[sa]).attr("data-title");var Ed=[],Qb=!1,ia=!1,w,ja=!1,N,H,Y,Ba,n,sd=50+2*Z,J,Zb=1,r=0,Fd=!1,wa=0,cb,Eb=!1;"max"==Da&&(Eb=!0,Pa=!1);var g=0,Bb=!1,Ic=[],cc=[],La=[],dc= 50+2*aa,D,oa,I=0,Gb=0,db=0,T,Hc=null;if(f.find(".slideshow_controls").length){var Ab=f.find(".slideshow_controls"),Wc=Ab.find(".controls_prev").css("cursor","pointer").bind(X,Va),B=Ab.find(".controls_toggle").css("cursor","pointer").bind(X,Va),Xc=Ab.find(".controls_next").css("cursor","pointer").bind(X,Va);pa||(Wc.bind("mouseover",Ta).bind("mouseout",Ua),B.bind("mouseover",Ta).bind("mouseout",Ua),Xc.bind("mouseover",Ta).bind("mouseout",Ua));G&&B.children("img").attr("src",kb);Ab.css({opacity:0,display:"block"}).stop().animate({opacity:1}, {duration:1E3,easing:"easeOutSine"})}var oc=!1;if(0<f.find(".info_holder").length){var oc=!0,ce=f.find(".data_controls"),zb=!1,Xd,lb=f.find(".info_toggle").css("cursor","pointer").bind(X,Va);pa||lb.bind("mouseover",Ta).bind("mouseout",Ua);var za=f.find(".info_holder")}else f.find(".info_toggle").remove(),f.find(".info_holder").remove();var xb=f.find(".link_toggle").css("cursor","pointer").bind(X,Va);pa||xb.bind("mouseover",Ta).bind("mouseout",Ua);if("inside"==fa){var bb=f.find(".playlist_toggle").css("cursor", "pointer").bind(X,Va).css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"});pa||bb.bind("mouseover",Ta).bind("mouseout",Ua)}else f.find(".playlist_toggle").remove();m&&m.css("zIndex",10);ce&&ce.css("zIndex",11);Ab&&Ab.css("zIndex",12);za&&za.css("zIndex",13);Ob&&Ob.css("zIndex",14);Ga&&(Pb.css("zIndex",15),ka.css("zIndex",16));Sa.length&&Sa.css({opacity:0.5,zIndex:17});Ha&&Ha.css("zIndex",18);nb&&(wc.css("zIndex",28),vc.css("zIndex",29),Wa.css("zIndex",30)); ef&&f.mouseenter(function(){G&&(ba=!0,Mb(!1));return!1}).mouseleave(function(){ba&&!sc&&(ba=!1,Mb(!0));return!1});ed&&(A.length&&he(),m.length&&!Ec&&ge());var $a=[],ua,Ac=!1,le=500,la,Wb,S=k.useDeeplink,pd=k.startUrl,s,Xb,pb,ke=100,Ya,sa=0,Tb,gd,hd,de,id,ee,fe,xc;for(sa;sa<x;sa++)for(hd=d(gc[sa]),Tb=0,gd=[],Xa={},xc=od(hd.attr("data-address")),Xa.categoryName=xc,Xa.mediaName=gd,$a.push(Xa),id=hd.find("ul li"),de=id.length,Tb;Tb<de;Tb++)ee=d(id[Tb]),fe=ee.attr("data-address"),xc=od(fe),gd.push(xc); nb?Wa.videoGallery({mg_gallery:dd,mg_settings:k,wrapper:f,videoGallerySetupDone:function(){Sb=this;S?uc||(d.address.internalChange(yc),d.address.externalChange(zc)):(s=k.activeCategory,Za())}}):S?uc||(d.address.internalChange(yc),d.address.externalChange(zc)):(s=k.activeCategory,Za());S&&uc&&(d.address.internalChange(yc),d.address.externalChange(zc));cf&&ae.bind("contextmenu",function(a){return!1});df||bf.resize(function(){if(!p||z)return!1;fd&&clearTimeout(fd);fd=setTimeout(af,100)});this.toggleSlideshow= function(a){if(!p||z)return!1;void 0==a?Md():Mb(a)};this.togglePlaylist=function(){if(!p)return!1;"inside"==fa&&Dc()};this.nextItem=function(){if(!p||ha||z)return!1;R();Zc()};this.previousItem=function(){if(!p||ha||z)return!1;R();Yc()};this.loadItem=function(a){if(!p||ha||z)return!1;if("KEN_BURNS"!=w){if(y)return!1}else if(Fa)return!1;R();if("number"===typeof a)0>a?a=0:a>v-1&&(a=v-1);else if("string"===typeof a){if(!S)return alert("loadItem method accepts string parameter only if deeplink is used!"), !1;var b=!1,c=0,e=$a[s].mediaName,f=e.length;for(c;c<f;c++)if(e[c]==a){pb=c;b=!0;break}if(!b)return S&&d.address.history(!1),!1;a=pb}else return alert("Invalid value for loadItem!"),!1;if(a==L)return!1;Ib=!0;hb();S?(d.address.value(Oa(a)),d.address.history()||d.address.history(!0)):Db(a)};this.loadCategory=function(a){if(!p||z)return!1;R();if("number"===typeof a)0>a?a=0:a>x-1&&(a=x-1);else if("string"===typeof a){if(!S)return alert("loadCategory method accepts string parameter only if deeplink is used!"), !1;if(!rd(a))return d.address.history(!1),!1;a=s}else return alert("Invalid value for openCategory!"),!1;if(a==Xb)return!1;z=!0;Fc();s=a;S?(d.address.value(Oa(0)),d.address.history()||d.address.history(!0)):Za()};d.fn.multiGallery.getSlideshowForcePause=function(){return dd.getSlideshowForcePause()};d.fn.multiGallery.videoEnd=function(){dd.videoEnd()};this.getSlideshow=function(){return G};this.getSlideshowForcePause=function(){return ba};this.videoPlayerHolderState=function(){var a=!0;"none"==Wa.css("display")&& (a=!1);return a};this.closePlayer=function(){if(!p||z||!nb||Aa)return!1;Aa=!0;Rb("off")};this.videoEnd=function(){if(!p||z||!nb)return!1;Aa=!0;Rb("off")};this.getAudioPlaylist=function(){if(!p)return!1;Ga&&ka&&ka.outputPlaylistData()};return this}})(jQuery);